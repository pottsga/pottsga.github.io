<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="author" content="Greg Potts">

  <meta name="description" content="How to manage your dotfiles with GNU stow">

  <meta name="keywords" content="technology,blog,pottsga,html,css,javascript,python,jinja,dotfiles,gnu stow">

  <link rel="shortcut icon" href="/static/img/favicon.png">

  <!-- CSS only -->
  <link rel="stylesheet" href="/static/css/vendor/bootstrap.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,400;0,700;1,400&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Ubuntu+Mono:wght@400;700&display=swap" rel="stylesheet">

  <!-- HighlightJS -->
  <link rel="stylesheet" href="/static/css/vendor/highlightjs/github.css">

  <link rel="stylesheet" href="/static/css/styles.css">
  <title>pottsga</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light" id="navigation">
  <div class="container">
    <a class="navbar-brand" href="/">pottsga</a>

    <button class="navbar-toggler" 
      type="button" 
      data-toggle="collapse" 
      data-target="#navbar" 
      aria-controls="navbar" 
      aria-expanded="false" 
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbar">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item ">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item ">
          <a class="nav-link" href="/pages/about">About</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pottsga">GitHub</a>
        </li>
      </ul>
    </div>
  </div>
</nav>



  <main class="container my-5">
    <h1>Dotfiles Management</h1>
<p><em>Written on</em> 10/23/2020 02:41 PM</p>
<p><em>Written by</em> <a href="mailto:pottsga@gmail.com">Greg Potts</a></p>
<p>Tags: <em>#dotfiles, #gnu stow</em></p>
<p id="timeToRead"><em>Estimated time to read:</em> </p>
<p><a href="/rss.xml">RSS Feed</a></p>
<article id="content" class="mt-5">
  <h2>Summary</h2>
<p>Managing your dotfiles on multiple machines has never been easier with the utilization of <a href="https://www.gnu.org/software/stow/"><code>GNU stow</code></a>.</p>
<p>Whereas before to install dotfiles you would <code>cp</code> each individual version-controlled file to the user's home directory, <code>GNU stow</code>, originally a utility for managing <code>perl</code> extensions, has allowed for this process to be made much easier. To learn how to implement this in your dotfiles setup, read this article.</p>
<p>An exmaple of this type of integration can be found in my dotfiles at <a href="https://github.com/pottsga/dotfiles"><code>https://github.com/pottsga/dotfiles</code></a>.</p>
<h2>Process</h2>
<h3>1. Create <code>git</code> repository</h3>
<p>Your dotfiles should already be in a version-control system (VCS), but if they are not, do this now.</p>
<p>Create a directory called <code>dotfiles</code> in your home directory. Run <code>git init</code> within this directory to initialize a git repository within that directory.</p>
<p>Within your new <code>dotfiles</code> directory, <code>touch</code> a <code>README.md</code> file, fill it out with your information, and create a new subdirectory that your dotfiles will live in. I named mine <code>src</code>.</p>
<h3>2. Move your files into subdirectory</h3>
<p>Move all of the dotfiles that you have into the <code>~/dotfiles/src</code> directory. For example, a common dotfile is <code>.vimrc</code> for <code>vim</code>.</p>
<p>At this point, your filesystem should now look like this:</p>
<pre><code class="language-bash">~/
  ...
  dotfiles/
    .git/
    README.md
    src/
      .vimrc
      ...
</code></pre>
<h3>3. Remove current dotfiles in home directory</h3>
<p>Before being able to utilize <code>stow</code> you will have to remove any current files you have in the home directory.</p>
<p><em>Be sure you have copied this file to the <code>~/dotfiles/src/</code> directory before removing your configurations.</em></p>
<p>For example, <code>rm ~/.vimrc</code></p>
<h3>4. Execute <code>stow</code></h3>
<p>By default, <code>stow</code> will create symlinks to the files within a directory in its direct parent directory. We want to override this because we want the utility to write files instead to the home directory. Luckily, you can tell stow to do this by passing in the target, or <code>-t</code> flag, with the directory you want it to instead write to.</p>
<p><code>cd</code> into the <code>src</code> directory. Execute the following command:</p>
<pre><code class="language-bash"># -v verbose
# -R recursive
# -t target, the home directory
stow . -v -R -t ~
</code></pre>
<p>You now will have a symlink at <code>~/.vimrc</code> that points to <code>~/dotfiles</code></p>
<h3>5. Creating an install script</h3>
<p>It is best to package your dotfiles with a method of installing the dotfiles for simplicity and ease of use.</p>
<p>To do this, run the following commands to create an install script file.</p>
<pre><code class="language-bash">cd ~/dotfiles
touch install
chmod a+x install # make the script executable
</code></pre>
<p>The simple script should programmatically call the <code>stow</code> utility within the <code>src</code> directory with the flags needed. It should look something like this:</p>
<pre><code class="language-bash">#!/bin/bash
cd src
stow . -v -R -t ~
cd ..
</code></pre>
<h3>6. Run the script</h3>
<p>Test and run the script to ensure that the files are being put where needed and that the symlinks are being created correctly.</p>
<h3>7. Push to git</h3>
<p>Push your source to a remote repository like <a href="https://github.com/"><code>https://github.com/</code></a> to ensure the safety of your code and better be able to deploy your dotfiles on remote machines.</p>
</article>
<script src="/static/js/includes/post.js"></script>

  </main>

  <!-- JS, Popper.js, and jQuery -->
  <script src="/static/js/vendor/jquery-3.5.1.min.js"></script>
  <script src="/static/js/vendor/popper.min.js"></script>
  <script src="/static/js/vendor/bootstrap.min.js"></script>
  
  <!-- HighlightJS -->
  <script src="/static/js/vendor/highlightjs/highlight.pack.js"></script>

  <script src="/static/js/script.js"></script>
</body>
</html>
